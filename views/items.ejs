<html lang="en">
  <!-- includes the head -->
  <%- include('./partials/head') %>
  <body>
    <!-- includes the nav -->
    <%- include('./partials/nav') %>
    <!-- Shows the table of items in the database -->
    
    <div class="itemsContent">
      <h1>Item Table</h1>
      <table>
        <!-- Table headers -->
        <tr>
          <th>Item ID</th>
          <th>Item Name</th>
          <th>Membership Requirement</th>
          <th>Tradeable</th>
          <th>Equipment Slot</th>
          <th>Catagory</th>
        </tr>
        <!-- Loops through the items array and displays the item information -->
        <% if(items.length > 0) { %> <% items.forEach(item => { %>
        <tr>
          <td><%= item.item_id %></td>
          <td><a href="/items/<%=item.item_id%>"><%= item.item_name %></a></td>
          <td><%= item.membership_requirement %></td>
          <td><%= item.tradeable %></td>
          <!-- If the equipment slot is null, display N/A -->
          <% if(item.equipment_slot === null) { %>
            <td><%= "N/A" %></td>
          <% } else { %>
            <td><%= item.equipment_slot %></td>
          <% } %>
          <td><%= item.catagory %></td>
          <% }) %> 
        </tr>
        <% } else { %>
          <!-- If there are no items in the database, display "No Items" -->
          <tr>
            <td>No Items</td>
          </tr>
        <% } %>
      </table>
    </div>
    <br />

    <!-- Adds a status to update the user -->
    <%- include('./partials/status') %>

    <!-- Form to add an item to the database -->
    <div class="addItem">
      <h1>Add Item</h1>
      
      <form action="/items" method="post">
        <div class="addItemsOptions">
          <!-- Gets the itemID as text field -->
          <label class="textInput">Item ID:
            <input
              type="text"
              id="itemID"
              name="itemID"
              value="<%= locals.itemID %>"
              autocomplete="off"
              required
            />
          </label>

          <!-- Gets the membershipReq as checks boxes -->
          <label class="checkBox">Membership Required: 
            <input 
              type="checkbox" 
              id="membershipReq"
              name="membershipReq" 
              value="on"<%= locals.membershipReq ? 'checked' : ''%>
            />
            <input
              type="hidden"
              name="membershipReq"
              value="off"
            />
            <span class="checkBoxSpan"></span>
          </label>

          <!-- Gets the itemName as text field -->
          <label class="textInput">Item Name:
            <input
              type="text"
              id="itemName"
              name="itemName"
              value="<%= locals.itemName %>"
              autocomplete="off"
              required
            />
          </label>

          <!-- Gets the tradeable as checks boxes -->
          <label class="checkBox">Tradeable: 
            <input 
              type="checkbox"
              id="tradeable"
              name="tradeable"
              value="on"<%= locals.tradeable ? 'checked' : '' %>
              />
            <input
              type="hidden"
              name="tradeable"
              value="off"
            />
            <span class="checkBoxSpan"></span>
          </label>
          
          <!-- Gets the equipmentSlot as a dropdown -->
          <label class="selectMenu">Equipment Slot:
            <select
              name="equipmentSlot"
              id="equipmentSlot"
              required
            >
              <option disabled selected value="">
                Select Option
              </option>
              <option value="notEquipable" <%= "locals.equipmentSlot" %>>
                Not Equipable
              </option>
              <option value="head" <%= "locals.equipmentSlot" %>>
                Head
              </option>
              <option value="cape"<%= "locals.equipmentSlot" %>>
                Cape
              </option>
              <option value="neck"<%= "locals.equipmentSlot" %>>
                Neck
              </option>
              <option value="ammo"<%= "locals.equipmentSlot" %>>
                Ammo
              </option>
              <option value="weapon"<%= "locals.equipmentSlot" %>>
                Weapon
              </option>
              <option value="body"<%= "locals.equipmentSlot" %>>
                Body
              </option>
              <option value="hands"<%= "locals.equipmentSlot" %>>
                Hands
              </option>
              <option value="feet"<%= "locals.equipmentSlot" %>>
                Feet
              </option>
              <option value="ring"<%= "locals.equipmentSlot" %>>
                Ring
              </option>
            </select>
          </label>

          <!-- Gets the catagory as a dropdown -->
          <label class="selectMenu">Catagory:
            <select name="catagory" id="catagory" required>
              <option disabled selected value="">
                Select Option
              </option>
              <option value="weapon"<%="locals.catagory"%>>
                Weapon
              </option>
              <option value="armor"<%="locals.catagory"%>>
                Armor
              </option>
              <option value="log"<%="locals.catagory"%>>
                Log
              </option>
              <option value="ore"<%="locals.catagory"%>>
                Ore
              </option>
              <option value="potion"<%="locals.catagory"%>>
                Potion
              </option>
              <option value="food"<%="locals.catagory"%>>
                Food
              </option>
              <option value="ingot"<%="locals.catagory"%>>
                Ingot
              </option>
              <option value="crafting"<%="locals.catagory"%>>
                Crafting
              </option>
              <option value="rune"<%="locals.catagory"%>>
                Rune
              </option>
            </select>
          </label>

          <!-- Submit button -->
          <button>Submit</button>
        </div>
      </form>
    </div>
    <br />
    <!-- includes the footer -->
    <%- include('./partials/footer') %>
  </body>
</html>
